{
  "alarms": [
    {
      "AlarmName": "AgenticRAG-HighLatency",
      "AlarmDescription": "Alert when search latency is too high",
      "MetricName": "SearchLatency",
      "Namespace": "RAG/SearchFusion",
      "Statistic": "Average",
      "Period": 300,
      "EvaluationPeriods": 2,
      "Threshold": 5000,
      "ComparisonOperator": "GreaterThanThreshold",
      "AlarmActions": [
        "arn:aws:sns:${AWS_REGION}:${AWS_ACCOUNT_ID}:agentic-rag-alerts"
      ]
    },
    {
      "AlarmName": "AgenticRAG-LambdaErrors",
      "AlarmDescription": "Alert when Lambda functions have errors",
      "MetricName": "Errors",
      "Namespace": "AWS/Lambda",
      "Dimensions": [
        {
          "Name": "FunctionName",
          "Value": "aai_hybrid_search_fusion"
        }
      ],
      "Statistic": "Sum",
      "Period": 300,
      "EvaluationPeriods": 1,
      "Threshold": 5,
      "ComparisonOperator": "GreaterThanThreshold",
      "AlarmActions": [
        "arn:aws:sns:${AWS_REGION}:${AWS_ACCOUNT_ID}:agentic-rag-alerts"
      ]
    },
    {
      "AlarmName": "AgenticRAG-LowQualityScores",
      "AlarmDescription": "Alert when result quality scores are low",
      "MetricName": "AverageScore",
      "Namespace": "RAG/FinalResults",
      "Statistic": "Average",
      "Period": 900,
      "EvaluationPeriods": 2,
      "Threshold": 0.3,
      "ComparisonOperator": "LessThanThreshold",
      "AlarmActions": [
        "arn:aws:sns:${AWS_REGION}:${AWS_ACCOUNT_ID}:agentic-rag-alerts"
      ]
    },
    {
      "AlarmName": "AgenticRAG-StepFunctionFailures",
      "AlarmDescription": "Alert when Step Functions executions fail",
      "MetricName": "ExecutionsFailed",
      "Namespace": "AWS/States",
      "Dimensions": [
        {
          "Name": "StateMachineArn",
          "Value": "arn:aws:states:${AWS_REGION}:${AWS_ACCOUNT_ID}:stateMachine:AaiKnowledgeRetrievalRagPipeline-${ENVIRONMENT}"
        }
      ],
      "Statistic": "Sum",
      "Period": 300,
      "EvaluationPeriods": 1,
      "Threshold": 1,
      "ComparisonOperator": "GreaterThanOrEqualToThreshold",
      "AlarmActions": [
        "arn:aws:sns:${AWS_REGION}:${AWS_ACCOUNT_ID}:agentic-rag-alerts"
      ]
    }
  ]
}